# ERP Система - FisherP

Закрытая ERP система на чистом PHP и MySQL.

## Технологии

- **Backend:** PHP 7.4+
- **База данных:** MySQL 5.7+
- **Frontend:** Bootstrap 5.3, jQuery 3.7, Chart.js 4.4

## Установка

1. Скопируйте проект в директорию веб-сервера (например, `C:\xampp\htdocs\fisherp\`)

2. Создайте базу данных:
   - **Рекомендуется:** Запустите миграции:
     ```bash
     php migrations/migrate.php run
     ```
   - **Альтернатива:** Откройте phpMyAdmin или MySQL консоль и импортируйте файл `database/init.sql`

3. Настройте подключение к БД:
   - Откройте `config/database.php`
   - Измените параметры подключения при необходимости:
     ```php
     define('DB_HOST', 'localhost');
     define('DB_NAME', 'fisherp_erp');
     define('DB_USER', 'root');
     define('DB_PASS', '');
     ```

4. Настройте BASE_URL:
   - Откройте `config/config.php`
   - Измените `BASE_URL` на ваш путь:
     ```php
     define('BASE_URL', 'http://localhost/fisherp/');
     ```

## Тестовые учетные записи

После установки доступны следующие учетные записи:

- **Администратор:**
  - Логин: `admin`
  - Пароль: `password`

- **Пользователь:**
  - Логин: `user`
  - Пароль: `password`

**ВАЖНО:** В продакшене обязательно измените пароли!

## Структура проекта

```
fisherp/
├── auth/              # Авторизация
│   ├── login.php     # Страница входа
│   └── logout.php    # Выход из системы
├── config/           # Конфигурация
│   ├── config.php    # Основные настройки
│   └── database.php  # Подключение к БД
├── database/         # SQL файлы
│   └── init.sql      # Инициализация БД (альтернативный способ)
├── migrations/       # Миграции базы данных
│   ├── migrate.php   # Скрипт запуска миграций
│   ├── 001_initial_schema.sql  # Первая миграция
│   └── README.md     # Документация по миграциям
├── includes/         # Общие файлы
│   ├── auth.php      # Функции авторизации
│   ├── header.php    # Шапка сайта
│   └── footer.php    # Подвал сайта
├── pages/            # Страницы приложения
│   └── admin.php     # Панель администратора
├── assets/           # Ресурсы (CSS, JS, изображения)
├── index.php         # Главная страница
├── .htaccess         # Настройки Apache
└── README.md         # Документация
```

## Безопасность

- Все страницы защищены авторизацией
- Пароли хранятся в хешированном виде (bcrypt)
- Используются подготовленные запросы (PDO)
- Защита от XSS через htmlspecialchars
- Настройки безопасности сессий

## Миграции базы данных

Проект использует систему миграций для управления изменениями БД:

```bash
# Запуск всех новых миграций
php migrations/migrate.php run

# Просмотр статуса миграций
php migrations/migrate.php status
```

Подробнее см. `migrations/README.md`

## Разработка

Система готова к дальнейшей разработке. Все основные компоненты на месте:
- Система авторизации
- Защита страниц
- Bootstrap UI
- Chart.js для графиков
- Система миграций БД
- Структура для расширения функционала
